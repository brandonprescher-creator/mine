{% extends "base.html" %}

{% block title %}{{ subject.name }} - Topics{% endblock %}

{% block breadcrumbs %}
{% include 'partials/_breadcrumbs.html' with breadcrumbs=[
    {'title': 'Home', 'url': '/'},
    {'title': 'Subjects', 'url': '/subjects'},
    {'title': subject.name, 'url': '#'}
] %}
{% endblock %}

{% block content %}
<div class="fade-in">
    <!-- Subject Header -->
    <div class="card-glass p-8 mb-8">
        <div class="flex items-center space-x-4 mb-4">
            <div class="text-6xl">{{ subject.icon }}</div>
            <div>
                <h1 class="heading-2 gradient-text">{{ subject.name }}</h1>
                <p class="text-dark-300">{{ subject.description }}</p>
            </div>
        </div>
    </div>
    
    <!-- Topics Grid -->
    <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6">Topics</h2>
        
        {% if topics %}
        <div class="grid-responsive">
            {% for topic in topics %}
            <div class="card-modern group cursor-pointer" onclick="window.location.href='/topic/{{ topic.id }}'">
                <div class="flex justify-between items-start mb-3">
                    <h3 class="text-xl font-bold group-hover:text-primary-400 transition-colors flex-1">
                        {{ topic.name }}
                    </h3>
                    <i class="fas fa-arrow-right text-primary-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <p class="text-dark-400 text-sm mb-4">{{ topic.description }}</p>
                <div class="flex items-center justify-between text-sm">
                    <span class="badge badge-primary">
                        <i class="fas fa-book-open mr-1"></i>
                        {{ topic.lesson_count if topic.lesson_count else 'Multiple' }} Lessons
                    </span>
                    {% if topic.difficulty %}
                    <span class="badge badge-{{ topic.difficulty }}">
                        {{ topic.difficulty|upper }}
                    </span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        {% include 'partials/_empty_state.html' with 
            icon='ðŸ“–',
            title='No Topics Yet',
            message='Topics for this subject are being developed. Check back soon!',
            button_text='Back to Subjects',
            button_href='/subjects'
        %}
        {% endif %}
    </div>
    
    <!-- Related Resources -->
    <div class="card-modern">
        <h3 class="text-xl font-bold mb-4">Additional Resources</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <a href="/api-explorer?subject={{ subject.name }}" class="flex items-center space-x-3 p-4 rounded-lg bg-dark-800 hover:bg-dark-700 transition-colors">
                <i class="fas fa-code text-2xl text-primary-400"></i>
                <div>
                    <div class="font-semibold">API Resources</div>
                    <div class="text-sm text-dark-500">Explore external learning materials</div>
                </div>
            </a>
            <a href="/worksheets?subject={{ subject.name }}" class="flex items-center space-x-3 p-4 rounded-lg bg-dark-800 hover:bg-dark-700 transition-colors">
                <i class="fas fa-file-alt text-2xl text-primary-400"></i>
                <div>
                    <div class="font-semibold">Generate Worksheets</div>
                    <div class="text-sm text-dark-500">Create practice materials</div>
                </div>
            </a>
            <a href="/games?subject={{ subject.name }}" class="flex items-center space-x-3 p-4 rounded-lg bg-dark-800 hover:bg-dark-700 transition-colors">
                <i class="fas fa-gamepad text-2xl text-primary-400"></i>
                <div>
                    <div class="font-semibold">Subject Games</div>
                    <div class="text-sm text-dark-500">Play educational games</div>
                </div>
            </a>
            <a href="/upload?subject={{ subject.name }}" class="flex items-center space-x-3 p-4 rounded-lg bg-dark-800 hover:bg-dark-700 transition-colors">
                <i class="fas fa-upload text-2xl text-primary-400"></i>
                <div>
                    <div class="font-semibold">Upload Content</div>
                    <div class="text-sm text-dark-500">Add your own materials</div>
                </div>
            </a>
        </div>
    </div>
</div>
{% endblock %}